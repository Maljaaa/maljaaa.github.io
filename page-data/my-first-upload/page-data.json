{"componentChunkName":"component---src-templates-blog-template-js","path":"/my-first-upload/","result":{"data":{"cur":{"id":"09b05dd5-60d5-50ae-ada4-fa6b03a35c7d","html":"<h3 id=\"앞서서\" style=\"position:relative;\"><a href=\"#%EC%95%9E%EC%84%9C%EC%84%9C\" aria-label=\"앞서서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>앞서서</h3>\n<p>저희 회사에서 api 개발하는 것을 보며, 저도 언젠가 저렇게 멋진 API를 만들겠다고 다짐했습니다. 그러기 위해서 RESTful API에 대해서 공부를 시작했습니다. 먼저 API 명세서를 작성하는 방법에 대해서 알아보았습니다. 찾아본 여러 방법 중에서 가장 자료가 많았던 것은 <strong>Swagger</strong>와 <strong>Spring REST Docs</strong>입니다. 둘이 어떻게 다르고 어떤 특징이 있는지 알아보겠습니다.</p>\n<blockquote>\n<p>그 전에! OAS가 뭔지는 알아야 합니다.\r\n블로그를 볼 때마다 나와서 찾아봐야 했거든요..</p>\n</blockquote>\n<h3 id=\"oasopen-api-specification\" style=\"position:relative;\"><a href=\"#oasopen-api-specification\" aria-label=\"oasopen api specification permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>OAS(Open API Specification)</h3>\n<p>OAS는 “개발자가 <strong>RESTful API</strong>를 쉽게 관리하고 사용할 수 있게 도와주는 표준 명세 작성 방식”이라고 이해하면 됩니다.<br>\nJSON, YAML 형식으로 작성된다는 것을 알고 다음 코드를 봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">openapi<span class=\"token operator\">:</span> <span class=\"token number\">3.0</span>.<span class=\"token number\">0</span>\r\ninfo<span class=\"token operator\">:</span>\r\n  title<span class=\"token operator\">:</span> Sample API\r\n  description<span class=\"token operator\">:</span> Optional multiline or single-line description in <span class=\"token punctuation\">[</span>CommonMark<span class=\"token punctuation\">]</span>(http<span class=\"token operator\">:</span><span class=\"token comment\">//commonmark.org/help/) or HTML.</span>\r\n  version<span class=\"token operator\">:</span> <span class=\"token number\">0.1</span>.<span class=\"token number\">9</span>\r\n\r\nservers<span class=\"token operator\">:</span>\r\n  - url<span class=\"token operator\">:</span> http<span class=\"token operator\">:</span><span class=\"token comment\">//api.example.com/v1</span>\r\n    description<span class=\"token operator\">:</span> Optional server description<span class=\"token punctuation\">,</span> e.g. Main (production) server\r\n  - url<span class=\"token operator\">:</span> http<span class=\"token operator\">:</span><span class=\"token comment\">//staging-api.example.com</span>\r\n    description<span class=\"token operator\">:</span> Optional server description<span class=\"token punctuation\">,</span> e.g. Internal staging server for testing\r\n\r\npaths<span class=\"token operator\">:</span>\r\n  /users<span class=\"token operator\">:</span>\r\n    get<span class=\"token operator\">:</span>\r\n      summary<span class=\"token operator\">:</span> Returns a list of users.\r\n      description<span class=\"token operator\">:</span> Optional extended description in CommonMark or HTML.\r\n      responses<span class=\"token operator\">:</span>\r\n        '<span class=\"token number\">200</span>'<span class=\"token operator\">:</span>    # status code\r\n          description<span class=\"token operator\">:</span> A JSON array of user names\r\n          content<span class=\"token operator\">:</span>\r\n            application/json<span class=\"token operator\">:</span>\r\n              schema<span class=\"token operator\">:</span>\r\n                type<span class=\"token operator\">:</span> array\r\n                items<span class=\"token operator\">:</span>\r\n                  type<span class=\"token operator\">:</span> string\r\n</code></pre></div>\n<p>자세한 형식은 <a href=\"https://swagger.io/resources/open-api/\">공식 문서</a>를 참고해주세요.</p>\n<h2 id=\"swagger\" style=\"position:relative;\"><a href=\"#swagger\" aria-label=\"swagger permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Swagger</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4ElEQVQY03WQy2rCYBSE84xupNKtG1d12ZUrcekT6DoUqkibEIOKilgwXqggjUhDWkWjEPGW5Jzkz39KN/ECznJgmPlGoAuttxvD+gbwI4dzTvclEFHIQyKazqfZVirTS4i9IgJbWhYLw4AxAPQ8ODmO63oAiOhfhTn9h0Wt8CTHcv1k+vVxZa+UeqckVZVGu6LUyrKqjcZi+f2lIu/2h2jRuflD7zw3H7Jf8Xw9Ax4aP/OZYeozYzzRS5L6pja62tD8XSBixCKc8Rh9moPaRLL39iUt5/zoOCfX9YPg5oU/61UOTJtQ0zYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"alt text\"\n        src=\"/static/9276a563a889ba3f2337ac2916a067d4/37523/image.png\"\n        srcset=\"/static/9276a563a889ba3f2337ac2916a067d4/e9ff0/image.png 180w,\n/static/9276a563a889ba3f2337ac2916a067d4/f21e7/image.png 360w,\n/static/9276a563a889ba3f2337ac2916a067d4/37523/image.png 720w,\n/static/9276a563a889ba3f2337ac2916a067d4/302a4/image.png 1080w,\n/static/9276a563a889ba3f2337ac2916a067d4/07a9c/image.png 1440w,\n/static/9276a563a889ba3f2337ac2916a067d4/541fe/image.png 1654w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\r\nSwagger는 Controller에 몇 가지의 어노테이션을 달기만 해도 API 문서가 만들어집니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> notes <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/home\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"home\"</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>어떄요? 쉽지 않나요?</p>\n</blockquote>\n<p>하지만… 이렇게 계속 소스코드에 작성하게 된다면 코드가 너무 지저분해지지는 않을까요…?</p>\n<p><img src=\"https://velog.velcdn.com/images/gimminjae/post/e990daf7-d3f8-41c6-a792-dfadfc70c057/image.png\" alt=\"\"></p>\n<p><a href=\"http://localhost:8080/swager-ui/%EB%A1%9C\">http://localhost:8080/swager-ui/로</a> 접속하게 되면 위와 같은 UI를 볼 수 있습니다.<br>\n또한 API 명세 확인 및 요청 테스트도 진행할 수 있습니다.</p>\n<p>그럼 정리해봅시다.</p>\n<p><strong>장점</strong></p>\n<ul>\n<li>깔끔한 UI</li>\n<li>어노테이션으로 편리한 작성법</li>\n<li>API Test 기능 지원</li>\n</ul>\n<p><strong>단점</strong></p>\n<ul>\n<li>더러워지는 소스코드</li>\n<li>API스펙과 일치 보장하지 않음</li>\n</ul>\n<h2 id=\"spring-rest-docs\" style=\"position:relative;\"><a href=\"#spring-rest-docs\" aria-label=\"spring rest docs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spring REST Docs</h2>\n<p><strong>테스트</strong> 기반으로 <strong>아스키닥(Asciidoc) 스니펫(snippet, 코드 조각; 재사용 가능한 소스 코드)</strong> 을 생성하고 이를 조합하여 <strong>아스키닥터(Asciidoctor)</strong> 플러그인을 이용해서 HTML 문서 생성</p>\n<p><img src=\"https://helloworld.kurly.com/post-img/spring-rest-docs-guide/06-spring-rest-docs-example.png\" alt=\"\"></p>\n<blockquote>\n<p><a href=\"https://github.com/thefarmersfront/spring-rest-docs-guide\">Spring REST Docs 가이드 예제</a></p>\n</blockquote>\n<ul>\n<li>build.gradel : asciidcotor 플러그인 및 asciidoctor 태스크 관련 스크립트 확인</li>\n<li>OrderRestControllerDocTest : 스테펫을 생성하기 위한 테스트 코드</li>\n<li>index.adoc : API 문서 생성시 기준이 되는 최상위 아스키닥(asciidoc) 문서입니다.</li>\n<li>사용자 정의 스니펫 : “Spring REST Docs”에서 제공하느 ㄴ스니펫 형식을 구미에 맞게 변경</li>\n</ul>\n<p>또 다른 방법으로는 Spring REST Docs로 OAS 문서를 만들어 Swagger UI로 호출하는 것입니다. 다시 말하자면, “Spring REST Docs API Specification Integration”을 이용하면 OAS문서를 JSON 혹은 YAML 형식으로 생성할 수 있습니다.</p>\n<blockquote>\n<p>OAS 문서 Swagger-UI, Postman 등 다양하게 활용 가능!</p>\n</blockquote>\n<p>그럼 정리해봅시다.</p>\n<p><strong>장점</strong></p>\n<ul>\n<li>테스트를 통해 스니펫을 생성함으로써, API에 대한 신뢰감 제공</li>\n<li>코드 변경에 대해 즉각적인 확인이 가능하다.</li>\n</ul>\n<p><strong>단점</strong></p>\n<ul>\n<li>\n<p>준비해야할 것이 많다(Spring Web, Test Framework, Spring REST Docs 작성, asciidoc, gradle…)</p>\n</li>\n<li>\n<p>개발자의 노력 정도에 따라 품질 편차가 심하다.</p>\n</li>\n</ul>\n<p><strong>결론</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">코드에 문서화를 위해 어노테이션이 붙게 되면 복잡하게 보일 수 있겠지만, 내가 생각했을 때에는 문서화마저도 코드로 작성할 수 있다는 것은 큰 이점이라고 판단이 된다. 여러 작업을 통해 하지 않고, 하나의 작업으로 여러 작업을 해결할 수 있기 때문이다. 그래서 나는 Spring REST Docs보다 Swagger 활용이 더 효율적이라고 생각한다.</code></pre></div>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://docs.tosspayments.com/resources/glossary/oas\">TossPayments-개발자센터</a><br>\n<a href=\"https://tech.kakaopay.com/post/openapi-documentation/\">kakaopay tech</a><br>\n<a href=\"https://velog.io/@gimminjae/Swagger-UI%EB%9E%80-%EC%99%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC-%ED%95%A0%EA%B9%8C\">Swagger-UI란? 왜 사용해야 할까?</a><br>\n<a href=\"https://helloworld.kurly.com/blog/spring-rest-docs-guide/?gad_source=1&#x26;gclid=CjwKCAjw9IayBhBJEiwAVuc3fvKMFcJfnfd-4aiqlmgUVHp3k6fUoi2BGJCjj4nVJ6phAI4EILieUxoCorYQAvD_BwE\">내가 만든 API를 널리 알리기 - Spring REST Docs 가이드편</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<ul>\n<li><a href=\"#%EC%95%9E%EC%84%9C%EC%84%9C\">앞서서</a></li>\n<li><a href=\"#oasopen-api-specification\">OAS(Open API Specification)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#swagger\">Swagger</a></p>\n</li>\n<li>\n<p><a href=\"#spring-rest-docs\">Spring REST Docs</a></p>\n<ul>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"앞서서 저희 회사에서 api 개발하는 것을 보며, 저도 언젠가 저렇게 멋진 API를 만들겠다고 다짐했습니다. 그러기 위해서 RESTful API에 대해서 공부를 시작했습니다. 먼저 API 명세서를 작성하는 방법에 대해서 알아보았습니다. 찾아본 여러 방법 중에서 가장 자료가 많았던 것은 Swagger와 Spring REST Docs입니다. 둘이 어떻게 다르고 어떤 특징이 있는지 알아보겠습니다. 그 전에! OAS가 뭔지는 알아야 합니다.\r\n블로그를 볼 때마다 나와서 찾아봐야 했거든요.. OAS(Open API Specification) OAS는 “개발자가 RESTful API를 쉽게 관리하고 사용할 수 있게 도와주는 표준 명세 작성 방식”이라고 이해하면 됩니다. JSON, YAML 형식으로 작성된다는 것을 알고 다음 코드를 봅시다. 자세한 형식은 공식 문서를 참고해주세요. Swagger \r\nSwagger는 Controller에 몇 가지의 어노테이션을 달기만 해도 API 문서가 만들어집…","frontmatter":{"date":"May 16, 2024","title":"Swagger vs Spring REST Docs","categories":"API","author":"신승민","emoji":"🍲🍚"},"fields":{"slug":"/my-first-upload/"}},"next":null,"prev":null,"site":{"siteMetadata":{"siteUrl":"https://maljaaa.github.io","comments":{"utterances":{"repo":"maljaaa/maljaaa.github.io"}}}}},"pageContext":{"slug":"/my-first-upload/","nextSlug":"","prevSlug":""}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}