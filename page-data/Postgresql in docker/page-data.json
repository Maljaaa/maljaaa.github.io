{"componentChunkName":"component---src-templates-blog-template-js","path":"/Postgresql in docker/","result":{"data":{"cur":{"id":"cb6dd4b5-4ee9-5117-88e1-4d070e399e24","html":"<h2 id=\"intro\" style=\"position:relative;\"><a href=\"#intro\" aria-label=\"intro permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Intro</h2>\n<p>회사에서 하는 일이 아닌, 개인 사이드 프로젝트를 시작했다.\n어떤 서비스를 만들지 고민하고,\n어떤 요구사항이 필요할지 정리했다.\n그리고 세부 요구사항과 개발 스펙을 정리하면서 ERD를 작성했다.\nERD를 작성하고 나서는 뭘 해야할까?\nDB를 구축해야할 것이다.\n그래서 나는 로컬에서 간단하고 빠르게 실행하기 위하여 Docker에 Postgresql를 설치하고 실행했다.</p>\n<h2 id=\"postgresql-이미지-다운로드\" style=\"position:relative;\"><a href=\"#postgresql-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\" aria-label=\"postgresql 이미지 다운로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PostgreSQL 이미지 다운로드</h2>\n<p>가장 먼저 이미지를 다운로드 받아야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker pull postgresql:latest</code></pre></div>\n<p>나는 버전에 상관없이 PostgerSQL을 사용할 수 있기 때문에 latest로 다운받았다.\n만약 특정 버전이 필요하다면 :latest가 아니라 <code class=\"language-text\">:[version]</code>으로 작성하면 될 것이다.</p>\n<h2 id=\"볼륨-생성\" style=\"position:relative;\"><a href=\"#%EB%B3%BC%EB%A5%A8-%EC%83%9D%EC%84%B1\" aria-label=\"볼륨 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>볼륨 생성</h2>\n<p>Docker Desktop에서도 생성이 가능하지만, 나는 명령어가 편하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker volume create pgdata</code></pre></div>\n<h2 id=\"컨테이너-실행\" style=\"position:relative;\"><a href=\"#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%8B%A4%ED%96%89\" aria-label=\"컨테이너 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컨테이너 실행</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker run --name sm-postgres -e POSTGRES_PASSWORD=[mysecretpassword] -p 54321:5432 -v pgdata:/var/lib/postgresql/data -d postgres:latest</code></pre></div>\n<ul>\n<li>—name my-postgres : 컨테이너 이름 지정</li>\n<li>-e POSTGRES_PASSWORD : DB서버 패스워드 입력(필수), 나머지 환경 변수는 옵션이다. 자세한 내용은 <a href=\"https://hub.docker.com/_/postgres\">Docker Hub 페이지</a>에서 확인할 수 있다.</li>\n<li>-p 54321:5432 : 호스트 PC와 컨테이너 내부 PostgrSQL의 포트 바인딩. 나는 5432로 사용하고 있는 PostgreSQL이 있어서 54321로 해주었다. 나중에 54322 이렇게 구분을 지어 더 사용할 수도 있을 것 같다.</li>\n<li>-v pgdata:/var/lib/postgres/data : 생성해준 볼륨을 pgdata에 바인딩</li>\n<li>-d postgres:latest : 백그라운드에서 postgresql:latest 이미지를 사용해 컨테이너를 실행</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNElEQVQY0x3HyU7bUABAUf8CKJDGA352bL/3PA/xQEJGhBBiwbJZdFFVrSDQbvoJ/PhF8eLq6Bre3RGzPzKpv2OvX/EPJ6a3P7G2/3B3f7E3J5ztO87ZzWn86fINe/OOtfrNZX1kNvzAXP7CWf/ByOoFM+eGi8klphCU3S2qbPCSEqES5lLjyxihMjydIaTGU3pUyBhXF9iBxvKDMcOLC76JgGuhsWWFSBY4qsSLa6a65KPa85Q0zF8+kY//Mf0IKyqwohw3bpjnPW5cY8tizBAyZSYCpkJhyQo36wirHt2scHRJlLXIosNJWvx8IChagqLDSxvCsieqhtHz2zLH8HXKTaC4Mh2sMCXs9+jVgeH+Gd1tmNcrwuGBsLkjqpekw46o3RJ29+huS748oBZrVLtGJA1fhl2a6jkJeUoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/f96306e9c446ec4abdc176d6ea84e5fd/37523/1.png\"\n        srcset=\"/static/f96306e9c446ec4abdc176d6ea84e5fd/e9ff0/1.png 180w,\n/static/f96306e9c446ec4abdc176d6ea84e5fd/f21e7/1.png 360w,\n/static/f96306e9c446ec4abdc176d6ea84e5fd/37523/1.png 720w,\n/static/f96306e9c446ec4abdc176d6ea84e5fd/302a4/1.png 1080w,\n/static/f96306e9c446ec4abdc176d6ea84e5fd/d5c6f/1.png 1261w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"postgresql-server-설정\" style=\"position:relative;\"><a href=\"#postgresql-server-%EC%84%A4%EC%A0%95\" aria-label=\"postgresql server 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PostgreSQL Server 설정</h2>\n<p>postgresql.conf와 pg_hba.conf 파일에는 이미 일부 설정되어 있다.\n가장 많이 변경하는 listen_address는 디폴트 값이 localhost이지만 ’*‘로 설정되어 있다.\nDocekr Desktop으로 컨테이너 > Files > Actions > More > View Files를 클릭하면 설정할 수 있다.\n명령어로는</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docer exec -it [container name] /bin/bash</code></pre></div>\n<p>여기서 파일을 수정할 수 있다.</p>\n<h2 id=\"dbeaver-연결\" style=\"position:relative;\"><a href=\"#dbeaver-%EC%97%B0%EA%B2%B0\" aria-label=\"dbeaver 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DBeaver 연결</h2>\n<p>난 DBeaver로 작업하는걸 좋아한다.\n그래서 포트를 54321로 변경해주고, 아까 설정해줬던 비밀번홀르 작성하면 연결에 성공한다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 506px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABM0lEQVQoz4VQS0vDQBjMvxFKms2SbR4mIWnMZvNqWhI9+ChIoYhoTopQROypR//yyH7Qgpd6mOV7zDc7jOFwG/Jhi+x+jTTJUFUVsixDmqbI85z6tmkQRRE450iShHaao+tjL6VEEAQwOLNxWUi8vixwW0eQqoTMcxIryxJKKcRxDNd1Yds2HYVhCN/3qfY87zRzHAeGfkyT4WcbYLcOMC9atHWJolDkTjubTCawLItgmuYfTKfTU633hh44QoBZFi6WI8TiEU3doO8HDMOAvu8hhKBDxti/IEES5QyWn+DtLsbzzRxSVWjbhrLROenfj9xzMGazGTnwfQ/ccXHYhPjYNLiqlqhKha7rsFqtKEPN0/xzMIqigIZ2ojPLVQ3RbXD99I6vzx2+93uM40j7I/ccfgGTLfINYcsTUgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/8238186effad3e6f8ed749d41398e0aa/29f4e/2.png\"\n        srcset=\"/static/8238186effad3e6f8ed749d41398e0aa/e9ff0/2.png 180w,\n/static/8238186effad3e6f8ed749d41398e0aa/f21e7/2.png 360w,\n/static/8238186effad3e6f8ed749d41398e0aa/29f4e/2.png 506w\"\n        sizes=\"(max-width: 506px) 100vw, 506px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"느낀점\" style=\"position:relative;\"><a href=\"#%EB%8A%90%EB%82%80%EC%A0%90\" aria-label=\"느낀점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>느낀점</h2>\n<p>Docker의 이미지를 활용해서 여러 서버들을 간단하게 로컬에서 돌리기 좋은 것 같다. 앞으로 이슈가 생긴다면 여기에 업로드하면 좋을 것 같다는 생각이 든다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://conceptbug.tistory.com/entry/PostgreSQL-Mac%EC%97%90-Docker%EB%A1%9C-PostgreSQL-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\">[PostgreSQL] Mac에 Docker로 PostgreSQL 설치 및 기본 설정하기</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#intro\">Intro</a></p>\n</li>\n<li>\n<p><a href=\"#postgresql-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\">PostgreSQL 이미지 다운로드</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%B3%BC%EB%A5%A8-%EC%83%9D%EC%84%B1\">볼륨 생성</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%8B%A4%ED%96%89\">컨테이너 실행</a></p>\n</li>\n<li>\n<p><a href=\"#postgresql-server-%EC%84%A4%EC%A0%95\">PostgreSQL Server 설정</a></p>\n</li>\n<li>\n<p><a href=\"#dbeaver-%EC%97%B0%EA%B2%B0\">DBeaver 연결</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%8A%90%EB%82%80%EC%A0%90\">느낀점</a></p>\n<ul>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"Intro 회사에서 하는 일이 아닌, 개인 사이드 프로젝트를 시작했다.\n어떤 서비스를 만들지 고민하고,\n어떤 요구사항이 필요할지 정리했다.\n그리고 세부 요구사항과 개발 스펙을 정리하면서 ERD를 작성했다.\nERD를 작성하고 나서는 뭘 해야할까?\nDB를 구축해야할 것이다.\n그래서 나는 로컬에서 간단하고 빠르게 실행하기 위하여 Docker에 Postgresql를 설치하고 실행했다. PostgreSQL 이미지 다운로드 가장 먼저 이미지를 다운로드 받아야 한다. 나는 버전에 상관없이 PostgerSQL을 사용할 수 있기 때문에 latest로 다운받았다.\n만약 특정 버전이 필요하다면 :latest가 아니라 으로 작성하면 될 것이다. 볼륨 생성 Docker Desktop에서도 생성이 가능하지만, 나는 명령어가 편하다. 컨테이너 실행 —name my-postgres : 컨테이너 이름 지정 -e POSTGRES_PASSWORD : DB서버 패스워드 입력(필수), 나머지 환경 변수는 옵션이다. 자…","frontmatter":{"date":"July 18, 2024","title":"Postgresql in docker","categories":"Docker","author":"신승민","emoji":"🐳"},"fields":{"slug":"/Postgresql in docker/"}},"next":{"id":"8dae09df-6081-55e1-aedc-a9ddd8263d3d","html":"<h2 id=\"intro\" style=\"position:relative;\"><a href=\"#intro\" aria-label=\"intro permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Intro</h2>\n<p>코드를 보다가 <strong>Redirect Strategy</strong> 부분의 코드를 보게 되었다. 평소에 알던 리다이렉트는 그저 서버가 어떤 URL로 강제로 View를 보여주는 것이라고만 생각해왔다. 하지만 이번 공부를 통해 조금 다른 부분까지 알게 되어서 정리해보고자 한다.</p>\n<h3 id=\"멱등성\" style=\"position:relative;\"><a href=\"#%EB%A9%B1%EB%93%B1%EC%84%B1\" aria-label=\"멱등성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>멱등성</h3>\n<p><strong>PRG패턴</strong>을 이야기하는데 있어서 가장 먼저 이야기해야하는 것은 멱등성이다. 멱등성이란, <strong>연산을 여러번 적용하더라도 결과가 달라지지 않는 성질</strong>을 의미한다.<br>\n그렇다면 웹에서는 <code class=\"language-text\">GET</code>, <code class=\"language-text\">HEAD</code>, <code class=\"language-text\">PUT</code>, <code class=\"language-text\">DELETE</code>는 멱등성을 가진다라고 말할 수 있다.<br>\n하지만 <code class=\"language-text\">POST</code>는 멱등성을 가지지 않는다.</p>\n<p>예를 들어보면, <code class=\"language-text\">GET</code>은 얼마든지 자주 호출해도 같은 결과를 나타내지만, 게시글을 등록하는 <code class=\"language-text\">POST</code>를 연달아 호출하면 호출한 횟수만큼 게시글이 등록된다.</p>\n<p>하지만 REDIRECT가 아니라 FORWARD로 처리할 경우 새로고침 시 게시글 작성/주문이 중복해서 처리될 수 있다.</p>\n<h3 id=\"prg-패턴\" style=\"position:relative;\"><a href=\"#prg-%ED%8C%A8%ED%84%B4\" aria-label=\"prg 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PRG 패턴</h3>\n<p>위와 같은 이유로 PSG 패턴은 꼭 필요하다. 그렇다면 더 자세히 알아보자.</p>\n<p><code class=\"language-text\">PSG 패턴</code>은 웹 개발 시 권장되는 디자인 패턴으로<br>\n멱등성을 보장하고 POST에 대한 결과를 다른 사용자가 공유하기 위해 사용되는 패턴이다. <code class=\"language-text\">POST -> REDIRECT -> GET</code>을 줄여서 <code class=\"language-text\">PRG</code>라고 한다.</p>\n<p><code class=\"language-text\">POST</code> 요청이 오면 해당 요청을 수행 후 <code class=\"language-text\">REDIRECT</code>를 시켜서 <code class=\"language-text\">GET</code> 요청으로 변환시키는 행위를 의미한다.</p>\n<h3 id=\"포워딩-vs-리다이렉트\" style=\"position:relative;\"><a href=\"#%ED%8F%AC%EC%9B%8C%EB%94%A9-vs-%EB%A6%AC%EB%8B%A4%EC%9D%B4%EB%A0%89%ED%8A%B8\" aria-label=\"포워딩 vs 리다이렉트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>포워딩 vs 리다이렉트</h3>\n<ol>\n<li>\n<p><strong>포워딩</strong> : 서버 내부에서 일어나는 일<br>\n1️⃣ 웹 브라우저 URL 창에 /event을 입력하고 엔터</p>\n<p>2️⃣ 서버가 /event URL을 전달 받음</p>\n<p>3️⃣ 서버가 서버 내부에서 /event -> /new-event로 포워딩</p>\n<p>4️⃣ /new-event 결과를 내부에서 렌더링</p>\n<p>5️⃣ 클라이언트에게 렌더링 된 결과를 반환</p>\n<p>6️⃣ 웹 브라우저에 응답 결과가 보이고 URL 창은 처음 입력한 /event로 유지됨</p>\n</li>\n<li>\n<p><strong>리다이렉트</strong> : 웹 브라우저가 인식하고 URL 경로를 실제 변경<br>\n1️⃣ 웹 브라우저 URL 창에 /event을 입력하고 엔터</p>\n<p>2️⃣ 서버가 /event URL을 전달 받음</p>\n<p>3️⃣ 서버가 /event -> /new-event로 리다이렉트</p>\n<p>4️⃣ 서버는 /new-event로 리다이렉트 하라는 결과를 웹 브라우저에 반환</p>\n<p>5️⃣ 웹 브라우저는 URL 창에 자동으로 /new-event를 입력하고 엔터(자동으로 일어나고, 실제 URL 창에 입력 결과가 /new-event로 변경됨)</p>\n<p>6️⃣ 서버가 /new-event URL을 전달 받음</p>\n<p>7️⃣ /new-event 결과를 내부에서 렌더링</p>\n<p>8️⃣ 클라이언트에게 렌더링 된 결과를 반환</p>\n<p>9️⃣ 웹 브라우저에 응답 결과가 보이고 URL 창은 리다이렉트 된 /new-event로 유지됨</p>\n</li>\n</ol>\n<h3 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<p>지금까지 <strong>REDIRECT</strong>는 화면을 서버에서 정해주는 것이라고만 생각했다. 하지만 지금 공부를 하고나서는 달라졌다. <strong>REDIRECT</strong>는 멱등하지 않은 POST가 반복해서 요청하는 것을 방지하기 위해 사용한다. 그리고 클라이언트의 요청을 <strong>REDIRECT</strong>로 <strong>다른 URL</strong>을 보냄으로써 다시금 그 <strong>URL</strong> 요청을 받는다. 그 요청을 응답으로 내주면 된다.</p>\n<p><a href=\"https://www.inflearn.com/questions/89530/redirect%EC%9D%B4%EC%9C%A0%EA%B0%80-%EA%B6%81%EA%B8%88%ED%95%A9%EB%8B%88%EB%8B%A4\">인프런 질문</a><br>\n<a href=\"https://gofo-coding.tistory.com/entry/PRG-%ED%8C%A8%ED%84%B4-Post-%E2%86%92-Redirect-%E2%86%92-Get\">PRG 패턴 : Post → Redirect → Get</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#intro\">Intro</a></p>\n<ul>\n<li><a href=\"#%EB%A9%B1%EB%93%B1%EC%84%B1\">멱등성</a></li>\n<li><a href=\"#prg-%ED%8C%A8%ED%84%B4\">PRG 패턴</a></li>\n<li><a href=\"#%ED%8F%AC%EC%9B%8C%EB%94%A9-vs-%EB%A6%AC%EB%8B%A4%EC%9D%B4%EB%A0%89%ED%8A%B8\">포워딩 vs 리다이렉트</a></li>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 04, 2024","title":"PRG(Post-Redirect-Get)","categories":"SpringMVC","author":"신승민","emoji":"😴"},"fields":{"slug":"/PRG/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://maljaaa.github.io","comments":{"utterances":{"repo":"maljaaa/maljaaa.github.io"}}}}},"pageContext":{"slug":"/Postgresql in docker/","nextSlug":"/PRG/","prevSlug":""}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}